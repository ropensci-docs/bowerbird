<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function is used to define a data source, which can then be added to a bowerbird data repository configuration. Passing the configuration object to bb_sync will trigger a download of all of the data sources in that configuration."><title>Define a data source — bb_source • bowerbird</title><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://docs.ropensci.org/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Define a data source — bb_source"><meta property="og:description" content="This function is used to define a data source, which can then be added to a bowerbird data repository configuration. Passing the configuration object to bb_sync will trigger a download of all of the data sources in that configuration."><meta property="og:image" content="https://docs.ropensci.org/bowerbird/logo.png"><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css"><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript><!-- End Matomo Code --></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">bowerbird</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.15.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="nav-link" href="../articles/bowerbird.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/data_provenance.html">Data provenance</a>
  </div>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ropensci/bowerbird/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Define a data source</h1>
      <small class="dont-index">Source: <a href="https://github.com/ropensci/bowerbird/blob/HEAD/R/source.R" class="external-link"><code>R/source.R</code></a></small>
      <div class="d-none name"><code>bb_source.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function is used to define a data source, which can then be added to a bowerbird data repository configuration. Passing the configuration object to <code>bb_sync</code> will trigger a download of all of the data sources in that configuration.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">bb_source</span><span class="op">(</span></span>
<span>  <span class="va">id</span>,</span>
<span>  <span class="va">name</span>,</span>
<span>  description <span class="op">=</span> <span class="cn">NA_character_</span>,</span>
<span>  <span class="va">doc_url</span>,</span>
<span>  <span class="va">source_url</span>,</span>
<span>  <span class="va">citation</span>,</span>
<span>  <span class="va">license</span>,</span>
<span>  comment <span class="op">=</span> <span class="cn">NA_character_</span>,</span>
<span>  <span class="va">method</span>,</span>
<span>  <span class="va">postprocess</span>,</span>
<span>  authentication_note <span class="op">=</span> <span class="cn">NA_character_</span>,</span>
<span>  user <span class="op">=</span> <span class="cn">NA_character_</span>,</span>
<span>  password <span class="op">=</span> <span class="cn">NA_character_</span>,</span>
<span>  access_function <span class="op">=</span> <span class="cn">NA_character_</span>,</span>
<span>  data_group <span class="op">=</span> <span class="cn">NA_character_</span>,</span>
<span>  collection_size <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  warn_empty_auth <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>id</dt>
<dd><p>string: (required) a unique identifier of the data source. If the data source has a DOI, use that. Otherwise, if the original data provider has an identifier for this dataset, that is probably a good choice here (include the data version number if there is one). The ID should be something that changes when the data set changes (is updated). A DOI is ideal for this</p></dd>


<dt>name</dt>
<dd><p>string: (required) a unique name for the data source. This should be a human-readable but still concise name</p></dd>


<dt>description</dt>
<dd><p>string: a plain-language description of the data source, provided so that users can get an idea of what the data source contains (for full details they can consult the <code>doc_url</code> link)</p></dd>


<dt>doc_url</dt>
<dd><p>string: (required) URL to the metadata record or other documentation of the data source</p></dd>


<dt>source_url</dt>
<dd><p>character vector: one or more source URLs. Required for <code>bb_handler_rget</code>, although some <code>method</code> functions might not require one</p></dd>


<dt>citation</dt>
<dd><p>string: (required) details of the citation for the data source</p></dd>


<dt>license</dt>
<dd><p>string: (required) description of the license. For standard licenses (e.g. creative commons) include the license descriptor ("CC-BY", etc)</p></dd>


<dt>comment</dt>
<dd><p>string: comments about the data source. If only part of the original data collection is mirrored, mention that here</p></dd>


<dt>method</dt>
<dd><p>list (required): a list object that defines the function used to synchronize this data source. The first element of the list is the function name (as a string or function). Additional list elements can be used to specify additional parameters to pass to that function. Note that <code>bb_sync</code> automatically passes the data repository configuration object as the first parameter to the method handler function. If the handler function uses bb_rget (e.g. <code>bb_handler_rget</code>), these extra parameters are passed through to the <code>bb_rget</code> function</p></dd>


<dt>postprocess</dt>
<dd><p>list: each element of <code>postprocess</code> defines a postprocessing step to be run after the main synchronization has happened. Each element of this list can be a function or string function name, or a list in the style of <code>list(fun,arg1=val1,arg2=val2)</code> where <code>fun</code> is the function to be called and <code>arg1</code> and <code>arg2</code> are additional parameters to pass to that function</p></dd>


<dt>authentication_note</dt>
<dd><p>string: if authentication is required in order to access this data source, make a note of the process (include a URL to the registration page, if possible)</p></dd>


<dt>user</dt>
<dd><p>string: username, if required</p></dd>


<dt>password</dt>
<dd><p>string: password, if required</p></dd>


<dt>access_function</dt>
<dd><p>string: can be used to suggest to users an appropriate function to read these data files. Provide the name of an R function or even a code snippet</p></dd>


<dt>data_group</dt>
<dd><p>string: the name of the group to which this data source belongs. Useful for arranging sources in terms of thematic areas</p></dd>


<dt>collection_size</dt>
<dd><p>numeric: approximate disk space (in GB) used by the data collection, if known. If the data are supplied as compressed files, this size should reflect the disk space used after decompression. If the data_source definition contains multiple source_url entries, this size should reflect the overall disk space used by all combined</p></dd>


<dt>warn_empty_auth</dt>
<dd><p>logical: if <code>TRUE</code>, issue a warning if the data source requires authentication (authentication_note is not NA) but user and password have not been provided. Set this to <code>FALSE</code> if you are defining a data source for others to use with their own credentials: they will typically call your data source constructor and then modify the <code>user</code> and <code>password</code> components</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>a tibble with columns as per the function arguments (excluding <code>warn_empty_auth</code>)</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <code>method</code> parameter defines the handler function used to synchronize this data source, and any extra parameters that need to be passed to it.</p>
<p>Parameters marked as "required" are the minimal set needed to define a data source. Other parameters are either not relevant to all data sources (e.g. <code>postprocess</code>, <code>user</code>, <code>password</code>) or provide metadata to users that is not strictly necessary to allow the data source to be synchronized (e.g. <code>description</code>, <code>access_function</code>, <code>data_group</code>). Note that three of the "required" parameters (namely <code>citation</code>, <code>license</code>, and <code>doc_url</code>) are not strictly needed by the synchronization code, but are treated as "required" because of their fundamental importance to reproducible science.</p>
<p>See <code><a href="../articles/bowerbird.html">vignette("bowerbird")</a></code> for more examples and discussion of defining data sources.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="bb_config.html">bb_config</a></code>, <code><a href="bb_sync.html">bb_sync</a></code>, <code><a href="../articles/bowerbird.html">vignette("bowerbird")</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## a minimal definition for the GSHHG coastline data set:</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">my_source</span> <span class="op">&lt;-</span> <span class="fu">bb_source</span><span class="op">(</span></span></span>
<span class="r-in"><span>   id <span class="op">=</span> <span class="st">"gshhg_coastline"</span>,</span></span>
<span class="r-in"><span>   name <span class="op">=</span> <span class="st">"GSHHG coastline data"</span>,</span></span>
<span class="r-in"><span>   doc_url <span class="op">=</span> <span class="st">"http://www.soest.hawaii.edu/pwessel/gshhg"</span>,</span></span>
<span class="r-in"><span>   citation <span class="op">=</span> <span class="st">"Wessel, P., and W. H. F. Smith, A Global Self-consistent, Hierarchical,</span></span></span>
<span class="r-in"><span><span class="st">     High-resolution Shoreline Database, J. Geophys. Res., 101, 8741-8743, 1996"</span>,</span></span>
<span class="r-in"><span>   source_url <span class="op">=</span> <span class="st">"ftp://ftp.soest.hawaii.edu/gshhg/"</span>,</span></span>
<span class="r-in"><span>   license <span class="op">=</span> <span class="st">"LGPL"</span>,</span></span>
<span class="r-in"><span>   method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"bb_handler_rget"</span>,level <span class="op">=</span> <span class="fl">1</span>, accept_download <span class="op">=</span> <span class="st">"README|bin.*\\.zip$"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## a more complete definition, which unzips the files after downloading and also</span></span></span>
<span class="r-in"><span><span class="co">##  provides an indication of the size of the dataset</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">my_source</span> <span class="op">&lt;-</span> <span class="fu">bb_source</span><span class="op">(</span></span></span>
<span class="r-in"><span>   id <span class="op">=</span> <span class="st">"gshhg_coastline"</span>,</span></span>
<span class="r-in"><span>   name <span class="op">=</span> <span class="st">"GSHHG coastline data"</span>,</span></span>
<span class="r-in"><span>   description <span class="op">=</span> <span class="st">"A Global Self-consistent, Hierarchical, High-resolution Geography Database"</span>,</span></span>
<span class="r-in"><span>   doc_url <span class="op">=</span> <span class="st">"http://www.soest.hawaii.edu/pwessel/gshhg"</span>,</span></span>
<span class="r-in"><span>   citation <span class="op">=</span> <span class="st">"Wessel, P., and W. H. F. Smith, A Global Self-consistent, Hierarchical,</span></span></span>
<span class="r-in"><span><span class="st">     High-resolution Shoreline Database, J. Geophys. Res., 101, 8741-8743, 1996"</span>,</span></span>
<span class="r-in"><span>   source_url <span class="op">=</span> <span class="st">"ftp://ftp.soest.hawaii.edu/gshhg/*"</span>,</span></span>
<span class="r-in"><span>   license <span class="op">=</span> <span class="st">"LGPL"</span>,</span></span>
<span class="r-in"><span>   method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"bb_handler_rget"</span>, level <span class="op">=</span> <span class="fl">1</span>, accept_download <span class="op">=</span> <span class="st">"README|bin.*\\.zip$"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   postprocess <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"bb_unzip"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   collection_size <span class="op">=</span> <span class="fl">0.6</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## define a data repository configuration</span></span></span>
<span class="r-in"><span><span class="va">cf</span> <span class="op">&lt;-</span> <span class="fu"><a href="bb_config.html">bb_config</a></span><span class="op">(</span><span class="st">"/my/repo/root"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## add this source to the repository</span></span></span>
<span class="r-in"><span><span class="va">cf</span> <span class="op">&lt;-</span> <span class="fu"><a href="bb_add.html">bb_add</a></span><span class="op">(</span><span class="va">cf</span>, <span class="va">my_source</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co">## sync the repo</span></span></span>
<span class="r-in"><span><span class="fu"><a href="bb_sync.html">bb_sync</a></span><span class="op">(</span><span class="va">cf</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg"></div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul></div>
                    <div class="col-md-3 col-sm-4">
                        <ul><h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul></div>
                    <div class="col-md-2 col-sm-4">
                        <ul><h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul></div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer></div>

  

  

  </body></html>

